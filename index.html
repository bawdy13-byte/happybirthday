<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday â€” For Mom</title>

<!-- Soft fonts: M PLUS Rounded 1c (rounded JP) + Inter (clean latin) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#fff8f0;
    --card:#ffffff;
    --accent:#e76f51;
    --accent-dark:#d45c3f;
    --muted:#666;
    --glass: rgba(255,255,255,0.7);
    --mobile-margin:16px;

    /* Soft typography scale */
    --font-sans: "M PLUS Rounded 1c", "Inter", "Hiragino Kaku Gothic ProN", Meiryo, "Noto Sans JP", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --base-font-size:16px;
    --radius-lg:16px;
    --radius-md:12px;
  }

  .photo-bg{
  background-image: url('ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2025-09-13 13.02.51.png');
  background-size: 130% auto;
  background-position: center;
  background-repeat: no-repeat;
  background-color: #f6f2ee;  
 }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:var(--font-sans);
    background:linear-gradient(180deg,#fff 0%,var(--bg) 100%);
    color:#222;
    font-size:var(--base-font-size);
    line-height:1.6;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    letter-spacing:0.01em;
  }

  /* Layout */
  .wrap{max-width:980px;margin:var(--mobile-margin) auto;padding:var(--mobile-margin)}
  header{display:flex;gap:16px;align-items:center}
  .logo{
    width:74px;height:74px;border-radius:14px;overflow:hidden;flex:0 0 74px;
    background:linear-gradient(135deg,#ffa680,#fe9a68);
    display:flex;align-items:center;justify-content:center;font-size:42px;
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
  }

  h1{margin:0;font-size:clamp(20px,4vw,32px);line-height:1.05;font-weight:700}
  .subtitle{color:var(--muted);font-size:14px;margin-top:6px}

  .hero{
    margin-top:16px;background:var(--card);border-radius:var(--radius-lg);
    padding:18px;box-shadow:0 10px 28px rgba(0,0,0,0.06);position:relative;overflow:hidden;
  }
  .big-title{
    font-size:clamp(26px,6vw,44px);
    font-weight:700;margin:6px 0 12px 0;
    letter-spacing:-0.01em;
  }

  .hero-grid{display:flex;flex-direction:column;gap:14px}
  @media(min-width:820px){.hero-grid{display:grid;grid-template-columns:1fr 360px;flex-direction:initial}}

  .panel{
    background:linear-gradient(180deg,#fff,#fff9f4);
    padding:16px;border-radius:var(--radius-md);
    border:1px solid rgba(0,0,0,0.03);
  }

  .message{white-space:pre-wrap;font-size:15px}
  .photo-placeholder{height:320px;border-radius:12px;display:flex;align-items:center;justify-content:center;padding:20px;color:#fff;text-align:center;box-shadow:inset 0 -10px 30px rgba(0,0,0,0.03)}
  .ph-1{background:linear-gradient(135deg,#e76f51,#f4a261)}
  .ph-2{background:linear-gradient(135deg,#2a9d8f,#2a9db2)}
  .ph-3{background:linear-gradient(135deg,#e9c46a,#f7d79c)}

  #fw{position:absolute;inset:0;pointer-events:none}
  footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

  @media(max-width:520px){
    .photo-placeholder{height:220px}
    .panel{padding:12px}
  }

  /* SPLASH overlay (keep) */
  .splash{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:9999;background:linear-gradient(180deg,#111827,#0b1220);color:#fff}
  .splash.hidden{opacity:0;visibility:hidden;pointer-events:none}
  .splash-canvas{position:absolute;inset:0;pointer-events:none}
  .splash-content{z-index:2;text-align:center;padding:24px}
  .splash-title{
    font-size:clamp(28px,8vw,64px);letter-spacing:2px;font-weight:800;
    opacity:0;transform:translateY(10px) scale(0.98);animation:popIn 1s ease forwards;
    font-family: "Inter", var(--font-sans);
  }
  .splash-sub{
    margin-top:8px;color:rgba(255,255,255,0.95);font-size:18px;opacity:0;transform:translateY(6px);
    animation:subIn 1s 0.35s ease forwards;
    font-weight:600;
  }
  @keyframes popIn{0%{opacity:0;transform:translateY(10px) scale(0.95)}60%{opacity:1;transform:translateY(-6px) scale(1.03)}100%{opacity:1;transform:none}}
  @keyframes subIn{0%{opacity:0;transform:translateY(8px)}100%{opacity:1;transform:none}}
  @keyframes splashAutoHide{0%{opacity:1;visibility:visible}80%{opacity:1;visibility:visible}100%{opacity:0;visibility:hidden;pointer-events:none}}
  #splash{animation:splashAutoHide 2.6s linear forwards}

  /* coupon input (soft UI) */
  .coupon-input{display:flex;gap:10px;align-items:center;margin-top:12px}
  .coupon-input .field{
    flex:1;
    display:flex;
    align-items:center;
    gap:8px;
    background:#fff;
    border-radius:14px;
    padding:10px;
    border:1px solid rgba(0,0,0,0.04);
    box-shadow:0 6px 18px rgba(0,0,0,0.04);
  }
  .coupon-input input[type="text"]{
    border:0;outline:0;font-size:16px;padding:10px 6px;width:100%;
    border-radius:8px;background:transparent;font-weight:500;
  }
  .coupon-input .checkBtn{
    flex:0 0 auto;
    background:var(--accent);
    color:#fff;
    border:none;
    padding:12px 18px;
    border-radius:12px;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 8px 22px rgba(231,111,81,0.18);
    transition:transform .08s ease, box-shadow .12s ease, background .12s;
  }
  .coupon-input .checkBtn:hover{background:var(--accent-dark)}
  .coupon-input .checkBtn:active{transform:translateY(1px)}
  .coupon-input .checkBtn:focus{outline:4px solid rgba(231,111,81,0.14);border-radius:12px}
  .hidden{display:none !important}

  .feedback{margin-top:10px;font-size:14px;color:var(--muted);min-height:22px}
  .feedback.success{color:#0a8a3a;font-weight:600}
  .feedback.error{color:#d9534f;font-weight:600}

  .gift-link{
    display:inline-block;margin-top:12px;padding:12px 16px;border-radius:12px;background:var(--accent);color:#fff;text-decoration:none;font-weight:700;
    box-shadow:0 10px 28px rgba(231,111,81,0.12);
  }

  .hint{font-size:13px;color:var(--muted);margin-top:6px}

  /* small accessibility helpers */
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash" class="splash" role="dialog" aria-label="ãŠèª•ç”Ÿæ—¥ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³" onclick="hideSplash()">
  <canvas id="splashCanvas" class="splash-canvas"></canvas>
  <div class="splash-content">
    <div class="splash-title">Happy Birthday</div>
    <div class="splash-sub">ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†</div>
  </div>
</div>

<div class="wrap" id="mainContent" aria-hidden="true">
  <header>
    <div class="logo" aria-hidden="true"><div style="font-weight:700;color:#fff;font-size:42px">ğŸ‚</div></div>
    <div>
      <h1>ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ï¼</h1>
      <div class="subtitle">Thank you for everything. Today is your day.</div>
    </div>
  </header>

  <main class="hero" id="hero">
    <canvas id="fw" aria-hidden="true"></canvas>
    <div class="hero-grid">
      <div class="left-column">

        <div class="panel" style="display:grid;grid-template-columns:1fr;gap:10px">
            <div class="photo-placeholder photo-bg" role="png">
            </div>
        </div>

      <aside class="right-column">
        <div class="panel">
          <h3>Special Coupon</h3>
          <div class="coupon">
            <p>ã‚¯ã‚¤ã‚ºã«æ­£è§£ã™ã‚‹ã¨ LINE ã‚®ãƒ•ãƒˆãƒªãƒ³ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ç­”ãˆã‚’å…¥åŠ›ã—ã¦ã€Œç¢ºèªã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p>

            <!-- Improved soft UI input -->
            <div class="coupon-input" role="group" aria-label="ã‚¯ã‚¤ã‚ºã®ç­”ãˆå…¥åŠ›">
              <div class="field">
                <label for="couponAnswer" class="sr-only">ã‚¯ã‚¤ã‚ºã®ç­”ãˆ</label>
                <input id="couponAnswer" type="text" placeholder="ã“ã“ã«ç­”ãˆã‚’å…¥åŠ›" autocomplete="off" />
              </div>
              <button id="checkBtn" class="checkBtn" type="button" aria-label="ç­”ãˆã‚’ç¢ºèª">ç¢ºèª</button>
            </div>

            <div id="answerHint" class="feedback" aria-live="polite">â€»å—å–æœŸé™ï¼š9/20ã¾ã§</div>
            <div id="feedback" class="feedback" aria-live="polite"></div>

            <!-- åˆæœŸã¯éè¡¨ç¤º -->
            <div id="linkWrapper" class="hidden" style="margin-top:6px">
              <a id="lineGift" class="gift-link" href="#" target="_blank" rel="noopener">LINEã‚®ãƒ•ãƒˆã‚’è´ˆã‚‹</a>
            </div>

          </div>
        </div>
      </aside>
    </div>
  </main>
</div>

<script>
// hideSplash same as before
function hideSplash(){
  const splash = document.getElementById('splash');
  const main = document.getElementById('mainContent');
  if(!splash) return;
  splash.classList.add('hidden');
  if(main) main.setAttribute('aria-hidden','false');
  setTimeout(startHeroFireworks,450);
  setTimeout(()=>{ try{ splash.remove(); }catch(e){} },1200);
}

/* Splash confetti and auto-hide (unchanged lightweight logic)*/
(function(){
  const splashCanvas = document.getElementById('splashCanvas');
  const sc = splashCanvas.getContext && splashCanvas.getContext('2d');
  let confetti = [];
  function fit(){ if(sc){ splashCanvas.width = window.innerWidth; splashCanvas.height = window.innerHeight; } }
  if(sc){ window.addEventListener('resize', fit); fit(); }
  function rand(a,b){ return a + Math.random()*(b-a); }
  function spawnConfetti(){
    if(!sc) return;
    const colors = ['#ff7a72','#ffd166','#06d6a0','#4cc9f0','#d0f4de'];
    for(let i=0;i<30;i++){
      confetti.push({ x: rand(0, splashCanvas.width), y: -rand(10,100), vx: rand(-0.6,0.6), vy: rand(1,3), r: rand(3,7), angle: rand(0,Math.PI*2), spin: rand(-0.1,0.1), color: colors[Math.floor(Math.random()*colors.length)], life: rand(80,140) });
    }
  }
  function drawConfetti(){ if(!sc) return; sc.clearRect(0,0,splashCanvas.width,splashCanvas.height); for(let i=confetti.length-1;i>=0;i--){ const p=confetti[i]; p.x+=p.vx; p.y+=p.vy; p.angle+=p.spin; p.life--; sc.save(); sc.translate(p.x,p.y); sc.rotate(p.angle); sc.fillStyle=p.color; sc.fillRect(-p.r/2, -p.r/2, p.r, p.r*1.6); sc.restore(); if(p.y > splashCanvas.height + 50 || p.life <= 0) confetti.splice(i,1); } }
  let spawnInterval = null; function startConfetti(){ if(!sc) return; spawnConfetti(); spawnInterval = setInterval(spawnConfetti, 420); }
  function stopConfetti(){ if(spawnInterval) clearInterval(spawnInterval); spawnInterval=null; }
  function tick(){ drawConfetti(); requestAnimationFrame(tick); }
  tick();
  startConfetti(); setTimeout(()=> spawnConfetti(), 300);
  const DURATION = 2600; setTimeout(()=>{ stopConfetti(); hideSplash(); }, DURATION);
})();

/* hero fireworks (unchanged lightweight) */
function startHeroFireworks(){
  const canvas = document.getElementById('fw');
  const hero = document.getElementById('hero');
  const ctx = canvas.getContext && canvas.getContext('2d');
  if(!ctx) return;
  let particles = [];
  function fit(){ canvas.width = hero.clientWidth; canvas.height = hero.clientHeight; }
  window.addEventListener('resize', fit); fit();
  function rand(a,b){ return a + Math.random()*(b-a); }
  const palette = ['#e76f51','#f4a261','#e9c46a','#2a9d8f','#264653'];
  function spawn(x,y){ const col = palette[Math.floor(Math.random()*palette.length)]; const [r,g,b]=hexToRgb(col); for(let i=0;i<40;i++){ const angle=Math.random()*Math.PI*2; const speed=rand(1,4); particles.push({x,y,vx:Math.cos(angle)*speed,vy:Math.sin(angle)*speed- rand(1,3),r,g,b,life:rand(40,100),age:0,size:rand(1.5,3)}); } }
  function hexToRgb(hex){ const v=hex.replace('#',''); return [parseInt(v.slice(0,2),16),parseInt(v.slice(2,4),16),parseInt(v.slice(4,6),16)]; }
  setTimeout(()=>{ spawn(canvas.width*0.2, canvas.height*0.3); spawn(canvas.width*0.8, canvas.height*0.35); },300);
  function tick(){ ctx.clearRect(0,0,canvas.width,canvas.height); for(let i=particles.length-1;i>=0;i--){ const p=particles[i]; p.x+=p.vx; p.y+=p.vy; p.vy+=0.03; p.age++; const a=Math.max(0,1-p.age/p.life); if(a<=0){particles.splice(i,1); continue;} ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,Math.PI*2); ctx.fillStyle=`rgba(${p.r},${p.g},${p.b},${a})`; ctx.fill(); } requestAnimationFrame(tick); }
  tick(); hero.addEventListener('click', function(e){ const r=canvas.getBoundingClientRect(); spawn(e.clientX - r.left, e.clientY - r.top); });
}

/* --- ã‚¯ã‚¤ã‚ºåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒœã‚¿ãƒ³æŠ¼ä¸‹ã®ã¿ã§åˆ¤å®šï¼‰ --- */
(function(){
  const input = document.getElementById('couponAnswer');
  const checkBtn = document.getElementById('checkBtn');
  const feedback = document.getElementById('feedback');
  const linkWrapper = document.getElementById('linkWrapper');
  const lineLink = document.getElementById('lineGift');

  const allowedAnswers = [
    'ãƒãƒ§ã‚³', 'ã¡ã‚‡ã“', 'ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆ', 'ã¡ã‚‡ã“ã‚Œãƒ¼ã¨',
    'choco', 'chocolate'
  ];

  function katakanaToHiragana(str){
    return str.replace(/[\u30A1-\u30F6]/g, function(c){
      return String.fromCharCode(c.charCodeAt(0) - 0x60);
    });
  }

  function normalize(str){
    if(!str) return '';
    str = String(str).trim();
    // å…¨è§’è‹±æ•°å­—ã‚’åŠè§’ã«ï¼ˆç°¡æ˜“ï¼‰
    str = str.replace(/[ï¼-ï½]/g, function(ch){
      return String.fromCharCode(ch.charCodeAt(0) - 0xFEE0);
    });
    str = str.toLowerCase();
    str = katakanaToHiragana(str);
    str = str.replace(/[\sã€€\.,ã€ã€‚!ï¼?ï¼Ÿ\(\)\[\]ã€Œã€ã€ã€\-ãƒ¼ã€œï½"']/g,'');
    return str;
  }

  const allowedSet = new Set(allowedAnswers.map(a => normalize(a)));

  function isCorrect(value){
    const n = normalize(value);
    return allowedSet.has(n);
  }

  function revealLink(){
    linkWrapper.classList.remove('hidden');
    lineLink.setAttribute('href','https://line.me/'); // å®Ÿéš›ã®URLã«å·®ã—æ›¿ãˆã¦ãã ã•ã„
    feedback.textContent = 'æ­£è§£ã§ã™ï¼ãƒªãƒ³ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸã€‚';
    feedback.className = 'feedback success';
  }

  function hideLink(){
    linkWrapper.classList.add('hidden');
  }

  function showIncorrect(){
    hideLink();
    feedback.textContent = 'æ®‹å¿µã€é•ã„ã¾ã™ã€‚ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ã­ã€‚';
    feedback.className = 'feedback error';
  }

  // ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§ã®ã¿åˆ¤å®š
  checkBtn.addEventListener('click', function(){
    const v = input.value;
    if(isCorrect(v)){
      revealLink();
    } else {
      showIncorrect();
    }
  });

})();
</script>
</body>
</html>
